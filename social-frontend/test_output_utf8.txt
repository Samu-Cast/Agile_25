
> social-frontend@0.1.0 test
> react-scripts test src/test/unit/components/CreatePostModal.test.js

  console.log
    Starting BrewHub Frontend Tests...

      at src/setupTests.js:21:13

  console.log
    [CreatePostModal] handleMediaChange called, files: 7

      at handleMediaChange (src/components/CreatePostModal.js:119:17)

  console.log
    Frontend tests completed!

      at src/setupTests.js:30:13

node.exe : FAIL 
src/test/unit/components/CreatePostModal.test.js
In riga:1 car:1
+ & "C:\Program Files\nodejs/node.exe" 
"C:\Program Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (FAI 
   L src/test/u...stModal.test.js:String) [], R  
  emoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  CreatePostModal
    ÔêÜ renders basic post form by default (179 
ms)
    ÔêÜ switches to review mode (48 ms)
    ÔêÜ submits a simple post (166 ms)
    ÔêÜ submits a review (225 ms)
    ÔêÜ validates review fields (38 ms)
    ÔêÜ fetches user communities (19 ms)
    Comparison Mode
      ÔêÜ enables comparison mode (46 ms)
      ├ù validates comparison fields (21 ms)
      ÔêÜ submits a comparison post (71 ms)
    Media Handling
      ÔêÜ handles too many media files (max 6) 
(44 ms)
    Community Selection
      ÔêÜ opens and closes community dropdown 
(32 ms)
      ÔêÜ searches communities by name (29 ms)
      ÔêÜ selects community target (61 ms)
      ÔêÜ posts to selected community (65 ms)
    Error Handling
      ÔêÜ handles failed post creation (API 
error) (30 ms)
      ÔêÜ shows loading state during submission 
(129 ms)
      ÔêÜ prevents submission when not logged in 
(7 ms)

  ÔùÅ CreatePostModal ÔÇ║ Comparison Mode ÔÇ║ 
validates comparison fields

    TestingLibraryElementError: Unable to find 
an element with the text: Post. This could be 
because the text is broken up by multiple 
elements. In this case, you can provide a 
function for your text matcher to make your 
matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          
[33mclass[39m=[32m"modal-overlay"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"modal-content 
create-post-modal"[39m
          [36m>[39m
            [36m<div[39m
              
[33mclass[39m=[32m"modal-header"[39m
            [36m>[39m
              [36m<h2>[39m
                [0mCrea Contenuto[0m
              [36m</h2>[39m
              [36m<button[39m
                
[33mclass[39m=[32m"close-btn"[39m
              [36m>[39m
                [0m├ù[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<div[39m
              
[33mclass[39m=[32m"post-type-tabs"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"tab-btn 
"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0m­ƒôØ Post[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"tab-btn 
"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mÔ¡É Recensione[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"tab-btn 
active"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mÔÜû´©Å Confronto[0m
              [36m</button>[39m
            [36m</div>[39m
            [36m<form>[39m
              [36m<div[39m
                
[33mclass[39m=[32m"comparison-fields"[39m
              [36m>[39m
                [36m<div[39m
                  
[33mclass[39m=[32m"comparison-container"[39m
                  [33mstyle[39m=[32m"display: 
flex; gap: 10px; margin-bottom: 20px;"[39m
                [36m>[39m
                  [36m<div[39m
                    
[33mclass[39m=[32m"comparison-item"[39m
                    [33mstyle[39m=[32m"flex: 
1; padding: 10px; background-color: rgb(249, 
249, 249); border-radius: 8px; border: 1px solid 
#eee;"[39m
                  [36m>[39m
                    [36m<h4[39m
                      
[33mstyle[39m=[32m"margin: 0px 0px 10px 0px; 
font-size: 14px; color: rgb(85, 85, 85);"[39m
                    [36m>[39m
                      [0mProdotto 1[0m
                    [36m</h4>[39m
                    [36m<div[39m
                      
[33mclass[39m=[32m"item-image-upload"[39m
                      
[33mstyle[39m=[32m"margin-bottom: 10px; 
text-align: center;"[39m
                    [36m>[39m
                      [36m<input[39m
                        
[33maccept[39m=[32m"image/*"[39m
                        
[33mid[39m=[32m"comp-img-1"[39m
                        
[33mstyle[39m=[32m"display: none;"[39m
                        
[33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        
[33mfor[39m=[32m"comp-img-1"[39m
                        
[33mstyle[39m=[32m"cursor: pointer; display: 
block;"[39m
                      [36m>[39m
                        [36m<div[39m
                          
[33mstyle[39m=[32m"width: 100%; padding: 20px 
0px; border: 2px dashed #ddd; border-radius: 
8px; color: rgb(136, 136, 136); display: flex; 
flex-direction: column; align-items: center; 
justify-content: center;"[39m
                        [36m>[39m
                          [36m<span[39m
                            
[33mstyle[39m=[32m"font-size: 24px;"[39m
                          [36m>[39m
                            [0m­ƒôÀ[0m
                          [36m</span>[39m
                          [36m<span[39m
                            
[33mstyle[39m=[32m"font-size: 12px;"[39m
                          [36m>[39m
                            [0mAggiungi Foto[0m
                          [36m</span>[39m
                        [36m</div>[39m
                      [36m</label>[39m
                    [36m</div>[39m
                    [36m<input[39m
                      
[33mclass[39m=[32m"post-input"[39m
                      
[33mplaceholder[39m=[32m"Nome prodotto"[39m
                      
[33mrequired[39m=[32m""[39m
                      
[33mstyle[39m=[32m"margin-bottom: 8px; 
font-size: 14px; font-weight: bold;"[39m
                      
[33mtype[39m=[32m"text"[39m
                      
[33mvalue[39m=[32m""[39m
                    [36m/>[39m
                    [36m<input[39m
                      
[33mclass[39m=[32m"post-input"[39m
                      
[33mplaceholder[39m=[32m"Marca"[39m
                      
[33mstyle[39m=[32m"font-size: 12px;"[39m
                      
[33mtype[39m=[32m"text"[39m
                      
[33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    
[33mstyle[39m=[32m"display: flex; 
align-items: center; font-weight: 900; color: 
rgb(204, 204, 204); font-style: italic; 
font-size: 20px;"[39m
                  [36m>[39m
                    [0mVS[0m
                  [36m</div>[39m
                  [36m<div[39m
                    
[33mclass[39m=[32m"comparison-item"[39m
                    [33mstyle[39m=[32m"flex: 
1; padding: 10px; background-color: rgb(249, 
249, 249); border-radius: 8px; border: 1px solid 
#eee;"[39m
                  [36m>[39m
                    [36m<h4[39m
                      
[33mstyle[39m=[32m"margin: 0px 0px 10px 0px; 
font-size: 14px; color: rgb(85, 85, 85);"[39m
                    [36m>[39m
                      [0mProdotto 2[0m
                    [36m</h4>[39m
                    [36m<div[39m
                      
[33mclass[39m=[32m"item-image-upload"[39m
                      
[33mstyle[39m=[32m"margin-bottom: 10px; 
text-align: center;"[39m
                    [36m>[39m
                      [36m<input[39m
                        
[33maccept[39m=[32m"image/*"[39m
                        
[33mid[39m=[32m"comp-img-2"[39m
                        
[33mstyle[39m=[32m"display: none;"[39m
                        
[33mtype[39m=[32m"file"[39m
                      [36m/>[39m
                      [36m<label[39m
                        
[33mfor[39m=[32m"comp-img-2"[39m
                        
[33mstyle[39m=[32m"cursor: pointer; display: 
block;"[39m
                      [36m>[39m
                        [36m<div[39m
                          
[33mstyle[39m=[32m"width: 100%; padding: 20px 
0px; border: 2px dashed #ddd; border-radius: 
8px; color: rgb(136, 136, 136); display: flex; 
flex-direction: column; align-items: center; 
justify-content: center;"[39m
                        [36m>[39m
                          [36m<span[39m
                            
[33mstyle[39m=[32m"font-size: 24px;"[39m
                          [36m>[39m
                            [0m­ƒôÀ[0m
                          [36m</span>[39m
                          [36m<span[39m
                            
[33mstyle[39m=[32m"font-size: 12px;"[39m
                          [36m>[39m
                            [0mAggiungi Foto[0m
                          [36m</span>[39m
                        [36m</div>[39m
                      [36m</label>[39m
                    [36m</div>[39m
                    [36m<input[39m
                      
[33mclass[39m=[32m"post-input"[39m
                      
[33mplaceholder[39m=[32m"Nome prodotto"[39m
                      
[33mrequired[39m=[32m""[39m
                      
[33mstyle[39m=[32m"margin-bottom: 8px; 
font-size: 14px; font-weight: bold;"[39m
                      
[33mtype[39m=[32m"text"[39m
                      
[33mvalue[39m=[32m""[39m
                    [36m/>[39m
                    [36m<input[39m
                      
[33mclass[39m=[32m"post-input"[39m
                      
[33mplaceholder[39m=[32m"Marca"[39m
                      
[33mstyle[39m=[32m"font-size: 12px;"[39m
                      
[33mtype[39m=[32m"text"[39m
                      
[33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                
[33mclass[39m=[32m"form-group"[39m
              [36m>[39m
                [36m<textarea[39m
                  
[33mclass[39m=[32m"post-input"[39m
                  
[33mplaceholder[39m=[32m"Descrivi le 
differenze, i pro e i contro..."[39m
                  [33mrequired[39m=[32m""[39m
                  [33mrows[39m=[32m"4"[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div[39m
                
[33mclass[39m=[32m"form-group"[39m
                
[33mstyle[39m=[32m"margin-bottom: 10px; 
position: relative;"[39m
              [36m>[39m
                [36m<div[39m
                  
[33mclass[39m=[32m"post-input"[39m
                  [33mstyle[39m=[32m"padding: 
8px; cursor: pointer; display: flex; 
justify-content: space-between; align-items: 
center;"[39m
                [36m>[39m
                  [36m<span>[39m
                    [0mPost to: My Profile[0m
                  [36m</span>[39m
                  [36m<span[39m
                    
[33mstyle[39m=[32m"font-size: 12px; opacity: 
0.7;"[39m
                  [36m>[39m
                    [0mÔû╝[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"form-group 
tag-users-section"[39m
                
[33mstyle[39m=[32m"margin-bottom: 15px; 
position: relative;"[39m
              [36m>[39m
                [36m<button[39m
                  
[33mclass[39m=[32m"tag-users-btn"[39m
                  [33mstyle[39m=[32m"padding: 
10px 16px; background-color: rgb(245, 245, 245); 
border: 1px solid #ddd; border-radius: 8px; 
cursor: pointer; font-size: 14px; font-weight: 
500; color: rgb(111, 78, 55); display: flex; 
align-items: center; gap: 8px; width: 100%; 
transition: all 0.2s;"[39m
                  
[33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [0m­ƒæÑ Tagga Utenti [0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<div[39m
                
[33mclass[39m=[32m"modal-footer"[39m
              [36m>[39m
                [36m<button[39m
                  
[33mclass[39m=[32m"submit-btn"[39m
                  
[33mtype[39m=[32m"submit"[39m
                [36m>[39m
                  [0mPubblica Confronto[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</form>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

    [0m [90m 173 |[39m
     [90m 174 |[39m             [90m// Try to 
submit without filling item names[39m
    [31m[1m>[22m[39m[90m 175 |[39m         
    fireEvent[33m.[39mclick(screen[33m.[39mge
tByText([32m'Post'[39m))[33m;[39m [90m// 
Note: Button text might be different for 
Comparison? No, likely "Post" or generic submit 
unless changed. [39m
     [90m     |[39m                            
        [31m[1m^[22m[39m
     [90m 176 |[39m             [90m// Wait, 
looking at CreatePostModal.js:[39m
     [90m 177 |[39m             [90m// The 
submit button text depends on logic?[39m
     [90m 178 |[39m             [90m// Line 
350 in original file (not visible in diff) shows 
button text.[39m[0m

      at Object.getElementError (node_modules/@te
sting-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/q
uery-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/q
uery-helpers.js:52:17
      at getByText (node_modules/@testing-library
/dom/dist/query-helpers.js:95:19)
      at Object.<anonymous> (src/test/unit/compon
ents/CreatePostModal.test.js:175:36)
      at TestScheduler.scheduleTests (node_module
s/@jest/core/build/TestScheduler.js:333:13)
      at runJest 
(node_modules/@jest/core/build/runJest.js:404:19)
      at _run10000 (node_modules/@jest/core/build
/cli/index.js:320:7)
      at runCLI (node_modules/@jest/core/build/cl
i/index.js:173:3)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 16 passed, 17 total
Snapshots:   0 total
Time:        4.347 s
Ran all test suites matching /src\\test\\unit\\co
mponents\\CreatePostModal.test.js/i.
